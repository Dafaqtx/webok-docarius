---
sidebar_position: 1
---

# Создание компонентов

Компоненты — это самодостаточные элементы, которые можно использовать на странице любое количество раз. Они принимают входные данные, так называемые props, и возвращают элементы, описывающие то, что мы хотим увидеть на экране.
Перед созданием компонента необходимо определить его роль в проекте, от этого зависит его расположение.

### Правило 1.

Если компонент привязан к приложению, например является шапкой сайта или навигацией, то его нужно разместить в папке по пути `src/app/components`.

### Правило 2.

Если компонент является частью фичи, то он размещается в папке `components` которая расположена в корне папки фичи.

### Правило 3.

Если компонент можно использовать повторно в других фичах, и он не привязан к приложению то его можно вынести из проекта в отдельный пакет или ресурс, перед этим необходимо обсудить данное решение с коллегами по проекту. В большинстве случаев компоненты, которые выносятся из проекта, используются в экосистеме АБО и попадают в пакет [webok-general](https://gitlab.akbars.tech/abo/webok-general-components).

:::warning Внимание!
Не все используемые повторно компоненты выносятся в отдельный пакет. Если данный компонент будет применяться только в рамках одного проекта его необходимо расположить в папке по пути `src/shared`
:::

При создании компонента в проекте необходимо:

1. Понять размещение компонента на основе 3-х правил.
2. Создать папку с названием компонента в папке components, название в стиле PascalCase.
3. Разместить в созданной папке п.2 файл `index.tsx` с кодом компонента

### Требования к React компонентам:

1. Каждый компонент должен содержать экспорт константный и дефолтный.
2. Компонент реализуется в функциональном стиле.
3. Если имеются входные параметры для компонента, то необходимо создать интерфейс в формате PascalCase [имя компонента]Props и добавить ему экспорт.
4. Каждый компонент должен иметь текстовое описание, для чего он и какие задачи выполняет, а также описание всех входных параметров.
5. Компоненты должны быть максимально абстрактны и легки в понимании.
6. Общее количество строк кода не более 200.
7. Сложные компоненты должны быть декомпозированы на несколько более мелких.
8. События и хендлеры по возможности оборачиваются в useCallback.
9. Для оптимизации необходимо применять useMemo, memo.
10. При использовании useEffect обязательно очищать эффекты в возвращаемой функции: addEventListener, setTimeout, MutationObserver…
11. Не забываем пользоваться хуком useLayoutEffect и применять его там, где нужно.

Пример оформления простого компонента:

```jsx
import React, { FC } from "react";

export interface HeaderProps {
  /**
   * Заголовок страницы
   */
  title: string;
}

/** Шапка сайта, отображает приветственный заголовок
 * @param title
 */
export const Header(): FC<HeaderProps> = ({ title }) => (
    <header>
        <h1>{title}</h1>
    </header>
)
```

:::warning Внимание!
Если компонент был добавлен в уже имеющуюся папку `components`, то в корне данной папке в файле `index.ts` необходимо добавить экспорт константы компонента. Экспорт типа в `index.ts` не добавляется.
:::

:::warning Внимание!
Если папка `components` создается впервые, то в ее корне необходимо размещать `index.ts` с экспортом констант всех компонентов.
:::

### Допустимые импорты после добавления компонента в проект:

```jsx title="В соседних компонентах, расположенных на 1 уровне"
import MyComponent from "../MyComponent";
import { MyComponent, MyComponentProps } from "../MyComponent";
```

```jsx title="В соседних компонентах, расположенных на 1 уровне, через корневой component/index.ts"
import { MyComponent } from "../index";
```

```jsx title="В главном компоненте фичи"
import MyComponent, { MyComponentProps } from "./components/MyComponent";
import { MyComponent } from "./components";
```

```jsx title="Через алиас @app"
import { MyComponent } from "@app/components";
import { MyComponent, MyComponentProps } from "@app/components/MyComponent";
import MyComponent, { MyComponentProps } from "@app/components/MyComponent";
```

```jsx title="Через алиас @shared"
import { MyComponent } from "@shared";
import MyComponent, { MyComponentProps } from "@shared/MyComponent";
```
